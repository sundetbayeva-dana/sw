(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},(n="_handleResponse")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.url=e.url}var n,r;return n=t,(r=[{key:"getCharacter",value:function(e){return fetch("".concat(this.url,"/people/").concat(e),{method:"GET"}).then(this._handleResponse)}},{key:"getPlanet",value:function(e){return fetch(e,{method:"GET"}).then(this._handleResponse)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.selector,r=t.handleFormSubmit;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selector=n,this._handleFormSubmit=r,this._formElement=document.querySelector(this._selector).querySelector("form")}var t,r;return t=e,(r=[{key:"setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._formElement.reset()}))}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._formElement.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const o=function(){function e(t){var n=t.cardSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_getElement",value:function(){return document.querySelector(".card")}},{key:"_setTextValue",value:function(e){this._characterData=e.characterData,this._planetData=e.planetData,this._element.querySelector(".name-value").textContent=this._characterData.name,this._element.querySelector(".sex-value").textContent=this._characterData.gender,this._element.querySelector(".height-value").textContent="".concat(this._characterData.height," см"),this._element.querySelector(".weight-value").textContent="".concat(this._characterData.mass," кг"),this._element.querySelector(".home-value").textContent=this._planetData.name,this._element.querySelector(".eyes-value").style.backgroundColor=this._characterData.eye_color}},{key:"generateCard",value:function(e){return this._element=this._getTemplate(),this._setTextValue(e),this._element}},{key:"setValueOnElement",value:function(e){return this._element=this._getElement(),this._setTextValue(e),this._element}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=document.querySelector(t)}var t,n;return t=e,(n=[{key:"setItem",value:function(e){this._container.append(e)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=new t({url:"https://swapi.dev/api"}),u=document.querySelector(".character-error"),s=new o({cardSelector:".card-template"});new r({selector:".form-section",handleFormSubmit:function(e){var t=document.querySelector(".card");+e.character<=0||+e.character>83?(u.classList.add("element_visible"),u.textContent="Введите число от 1 до 83",t&&t.classList.add("element_invisible")):(u.classList.remove("element_visible"),l.getCharacter(e.character).then((function(e){l.getPlanet(e.homeworld).then((function(n){if(t)t.classList.remove("element_invisible"),s.setValueOnElement({characterData:e,planetData:n});else{var r=s.generateCard({characterData:e,planetData:n});h.setItem(r)}}))})).catch((function(e){u.textContent="Произошла ошибка. Попробуйте позже:)",console.log(e)})))}}).setEventListeners();var h=new i(".card-section")})();